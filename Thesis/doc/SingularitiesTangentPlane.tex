\subsection{singularities and the tangent plane}

In this section we want to study the local properties of a projective variety.
A particularly simple tool is the tangent plane.
The analytical idea behind it is to approximate, say, a surface near a point by a plane as close as possible.
That's what a FrechÃ©t differential does for, say,  the graph of some differentialble function $\reals^2 \to \reals$.
In the analytical world such a plane is defined via partial derivatives, which can be emulated for polynomials in a purely algebraic way.

\subsubsection{partial derivatives}

 % TODO

\begin{definition}[partial derivative]
Let $D : k[x_0,..x_n] \to k[x_0,..x_n]$ be a derivation over $k$, i.e. a homomorphism of $k$-modules which satisfies the Leibniz rule $D(xy) = xDy+yDx$ for $x,y \in k[x_0,..x_n]$. Furthermore let $D(h) \in k$ for every linear form $h$. We call such a derivation a \emph{partial derivative}.
\end{definition}

\begin{example}
The standard example for partial derivatives are of course the partial derivates with respect to one of the variables $x_i$, defined as $\del_{x_i}(x_j) = \delta_{i,j} := \begin{cases} 1, & \text{ for } i = j \\ 0, & \text {otherwise.} \end{cases}$
\end{example}

\begin{example}
For any monomial $\{ h_i\}_{i=0}^n$ basis of $\bigoplus_{i=0}^n kx_i \subset k[x_0,..x_n]$ we obtain a family of partial derivatives $\{ \del_{h_i} \}_{i=0}^n$ for which $\del_{h_i}(h_j) = \delta_{i,j}$ holds. The construction goes as follows: Let $M = (a_{i,j})  \in k^{(n+1)\times(n+1)}$ be the base change matrix and $M^{-1} = (\widetilde a_{i,j})$ be its inverse.
This just means $h_i = \sum_{j=0}^n a_{i,j} x_j$ and hence $\del_{x_k}(h_i) = a_{i,k}$.
From $\delta_{i,j} = \sum_{k=0}^n a_{i,k}\widetilde a_{k,j}
= \sum_{k=0}^n \del_{x_k}(h_i) \widetilde a_{k,j}$ it is obvious that we need to define

\begin{equation}
\del_{h_j} = \sum_{k=0}^n \widetilde a_{k,j} \del_{x_k}
\end{equation}

Another way to write this would be
\begin{equation}
\begin{pmatrix} \del_{h_0} \\ \vdots \\ \del_{h_n} \end{pmatrix}
= M^{-T}
\begin{pmatrix} \del_{x_0} \\ \vdots \\ \del_{x_n} \end{pmatrix}
\end{equation}
\end{example}

A useful fact, that allows us to recover a homogeneous polynomial by its partial derivatives is

\begin{proposition}[Euler's formula]
For any $f \in k[x_0,..x_n]$ homogeneous of degree $d$ we have the equality
\[ df = \sum_{i=0}^n \del_{x_i}(f)x_i \]
\end{proposition}
\begin{proof}
By linearity we only need to prove the monomial case $f = \prod_{i=0}^n x_i^{a_i}$, $a_i$ being integers such that $\sum_{i=0}^n a_i = d$.
\begin{equation}
\sum_{i=0}^n \del_{x_i}(f)x_i
= \sum_{i=0}^n \begin{Bmatrix} \left(\prod_{j\neq i} x_j^{a_j}\right) a_i x_i^{a_i-1} x_i, & \text{ for } a_i > 0
\\ 0, &\text{ for } a_i = 0 \end{Bmatrix}
= \sum_{i=0}^n a_i f = df
\end{equation}
\end{proof}

\begin{corollary}
$\V(\del_{x_0}(f),..\del_{x_n}(f), df) = \V(\del_{x_0}(f),..\del_{x_n}(f))$
\end{corollary}


\begin{lemma}
Let $\del_1,\del_2$ be partial derivatives, then $\del_1.\del_2 = \del_2.\del_1$.
\end{lemma}
\begin{proof}
We only need to prove this for monomials, and we'll perform an induction on the degree.
If $f$ is a monomial of degree less than 2, then $\del_1(\del_2(f)) = 0 = \del_2(\del_1(f))$. 
Now suppose $f = x_if'$ and $\del_1(\del_2(f')) = \del_2(\del_1(f'))$.

\begin{equation}
\del_1.\del_2(x_if') = \del_1(x\del_2(f') + f'\del_2(x)) = 
\del_1(x)\del_2(f') + \del_1(f')\del_2(x) + x\del_1(\del_2(f')) + \underset{=0}{\underbrace{f'\del_1(\del_2(x))}}
\end{equation}
The last term is symmetric in $\del_1,\del_2$ (by assumption).
\end{proof}

\begin{corollary}[Taylor's formula]
Let $f \in k[x_0,..x_n]$ be a polynomial and $f = \sum_{i=0}^d f_i$ its decomposition into homogeneous parts.
Then $f_i = \frac{1}{i!} \sum_{|\bf{\alpha}|=i} \del^{\bf{\alpha}}(f)(0)x^{\bf{\alpha}}$ in multi-index notation.
\end{corollary}
\begin{proof}
% TODO ...
\end{proof}


\subsubsection{the tangent space}

\begin{definition} \label{definitionTangentSpace}
Let $\V(I)$ be a projective variety in $\proj^n_k$, $I \subset k[x_0,..x_n]$ a homogeneous ideal and $P\in \V(I)$ a point on that variety.
If $I$ is generated by a single homogeneous polynomial $f$, then we define $T_P(\V(f))$ to be the variety $\V(f^{(1)})$ where $f^{(1)}(P) := \sum_{i=0}^n (\del_{x_i}f)(P)x_i$.
If $I$ is generated by homogeneous polynomials $f_0,..f_r$, then we define $T_P(\V(I)) = \bigcap_{i=0}^r T_P(f_i)$.
We will see in a second that the choice of generators does not matter.
\end{definition}

\begin{example} \label{exampleTangentPlaneOfLinearSubsets}
Let's consider some trivial examples first.
The tangent space of a hyperplane $\V(h)$ at any point $P$ is the hyperplane itself, by Euler's formula:
\begin{equation}
h = \sum_{i=0}^n \underset{\in k}{\underbrace{(\del_{x_i}h)}}x_i = \sum_{i=0}^n (\del_{x_i}h)(P) x_i
\end{equation}
The same holds for \emph{linear subspaces}, which are just intersections of hyperplanes (for instance lines or points).
\end{example}

\begin{example}
Suppose $I \subset J \subset k[x_0,..x_n]$ are homogeneous ideals, $P \in \V(I)$.
One can see that $T_P(I) \subset T_P(J)$ as follows: Let $f_0,..f_r$ be generators of $I$ and $g_0,..g_s$ be generators of $J$.
Because $I$ lies in $J$, we can write each $f_i$ as sums of products of the $g_j$.
By definition $T_P(\V(J)) = \bigcap_{j=0}^s \V(g_j^{(1)})$.
Consider now the set $K = \mkset{ f \in k[x_0,..x_n] }{f^{(1)}(P) \text{ vanishes on }T_P(\V(J))}$.
By the identities $(f+g)^{(1)}(P) = f^{(1)}(P) + g^{(1)}(P)$ and $(fg)^{(1)}(P) = f(P)g^{(1)}(P) + g(P)f^{(1)}(P)$ it can be easily checked that $K$ is an ideal.
We defined it to contain the $g_j$, so it also contains the $f_i$.
This shows that $\V(J) \subset \V(I)$ implies $T_P(\V(J)) \subset T_P(\V(I))$ and hence by choosing $I=J$ it also shows that the choice of generators in definition \ref{definitionTangentSpace} did indeed not matter.
\end{example}

\begin{example}
Consider the family of cubic curves in $\proj^2_k$ given by $y^2z - x^3 - axz^2 \in k[x,y,z]$, $a \in k$ and let $P = [0:0:1] \in \V(y^2z - x^3 - axz^2)$.
The equation of the tangent space is $ax$, hence the tangent space is the line $x = 0$ unless $a = 0$ in which case the tangent space is the whole $\proj^2_k$.
Points for which the equation of the tangent plane vanish are rather special and hence deserve a name.
\end{example}


\begin{definition}
A \emph{singular} point of a hypersurface $\V(f) \subset \proj^n_k$ is a point in $\V(f,\del_{x_0}f,..\del_{x_n}f)$.
In other words, a point $P$ is singular iff $T_P(\V(f)) = \proj^n_k$.
\end{definition}


\subsubsection{invariance of singularities under a change of the system of partial derivatives}

Oftentimes it is more convenient to perform base changes to simplify equations and sometimes one can do without, bnut in exchange one needs to introduce more flexible tools.

Remember, in order to study singularities we introduced partial derivatives $\del_{x_i} : k[x_0,..x_n] \to k[x_0,..x_n]$ which satisfied $\del_{x_i}(x_j) = \delta_{i,j}$.

%TODO

\subsubsection{intersection multiplicities}

% TODO

\subsubsection{the intersection with a tangent plane}

% TODO
\begin{todo}
\item show that we obtain a singularity
\end{todo}

